<div class="container mx-auto flex-col flex max-w-[980px] p-6">
  <% if @vehicle.images.attached? %>
    <div class="grid gap-4 grid-cols-1 sm:grid-cols-2 %>">
      <div class="row-span-2">
        <%= image_tag @vehicle.images.first.variant(resize_to_fill: [480, 480]),
                      alt: @vehicle.name,
                      class: "rounded-lg object-cover w-100 h-100",
                      width: 640,
                      height: 640 %>
      </div>
      <% if @vehicle.images.count > 1 %>
        <div class="grid gap-4 <%= @vehicle.images.count == 2 ? 'grid-rows-1' : 'grid-rows-2' %>">
          <% @vehicle.images[1..].each do |image| %>
            <%= image_tag image.variant(resize_to_fill: [480, 232]),
                          alt: @vehicle.name,
                          class: "rounded-lg object-cover w-100",
                          width: 640,
                          height: 232 %>
          <% end %>
        </div>
      <% end %>
    </div>
  <% end %>
  <div class="mt-6 grid grid-cols-1 lg:grid-cols-3 gap-4">
    <div class="col-span-2">
      <h1 class="text-3xl mb-4 font-bold leading-tight tracking-tighter md:text-5xl lg:leading-[1.1]">
        <%= @vehicle.name %>
      </h1>
      <p>
        <%= @vehicle.description %>
      </p>
      <%= render_separator class: "my-6" %>
      <ul class="grid grid-cols-1 lg:grid-cols-2 gap-x-6 gap-y-1.5 text-left">
        <% @vehicle.features.each do |feature| %>
          <li class="flex items-center space-x-3">
            <%= svg_icon('checkmark', class: 'shrink-0 w-3.5 h-3.5 text-green-500 dark:text-green-400') %>
            <span><%= feature.name %></span>
          </li>
        <% end %>
      </ul>
      <%= render_separator class: "my-6" %>
      <div class="col-span-4 h-[300px]"
           data-controller="vehicle-map"
           data-vehicle-map-latitude-value="<%= @vehicle.latitude %>"
           data-vehicle-map-longitude-value="<%= @vehicle.longitude %>"></div>
      <%= render_separator class: "my-6" %>

    </div>
    <div class="col-span-1">
      <div class="rounded-lg border p-4 mb-6">
        <h3 class="font-semibold mb-3"><%= t(".owner") %></h3>
        <div class="flex items-center space-x-3">
          <% if @vehicle.owner.avatar.attached? %>
            <%= image_tag @vehicle.owner.avatar.variant(resize_to_fill: [48, 48]), class: "rounded-full w-12 h-12 object-cover" %>
          <% else %>
            <div class="rounded-full w-12 h-12 bg-gray-200"></div>
          <% end %>
          <div>
            <div class="font-medium"><%= @vehicle.owner.email %></div>
            <% if @vehicle.owner.phone_number.present? %>
              <div class="text-sm text-gray-600"><%= @vehicle.owner.phone_number %></div>
            <% end %>
          </div>
        </div>
        <% if @vehicle.owner.bio.present? %>
          <p class="mt-3 text-sm text-gray-700"><%= @vehicle.owner.bio %></p>
        <% end %>
      </div>
    </div>
  </div>
</div>